<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible'>
    <title>GiphyLab</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='./css/style.css'>
    <script src='./js/main.js'></script>
    <link href="https://fonts.googleapis.com/css?family=B612+Mono&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/0a4035d3a2.js"></script>


</head>
<body>

<div class="f-col" id="main">
    <div class="f-row" id="header">
        <div class="f-item" id="theme"></div>
        <div class="f-item" id="nav"></div>
    </div>
    
    <div class="f-row" id="filter">
        <div class="f-item" id="search">
            <form id="search-form">
            <input name="h-search" id="goSearch" placeholder="Search giphs!">
            <div><input id="find" type="submit"><i class="fas fa-search"></i></button></div>
        </form>
        </div>
    </div>

    <div class="f-row" id="prev-search">
        <div class="f-item" id="buttons-view"></div>
    </div>

    <!-- <div class="f-row" id="sort">
        <div class="f-item" id="option">Filter Stickers</div>
        <div class="f-item" id="option">Reactions Only</div>
        <div class="f-item" id="option">
            <button><i class="fas fa-sort"></i> Reverse sort</button>
        </div>
    </div>
     -->
    <!-- <div class="f-row" id="sort">
            <div class="f-item" id="tags"></div>
            <div class="f-item" id="tags"></div>
            <div class="f-item" id="tags"></div>
    </div> -->

    <!-- this div will display the results from a query by appending
         f-item divs with the image inside -->
    <div class="f-row" id="query">
        <div class="f-item" id="result">
            <img src="">
        </div>
    </div>

    <div class="f-row" id="footer">
        <div class="f-item" id="social"></div>
        <div class="f-item" id="copy"></div>
    </div>

</div>

<script>
var APIKey = "4CdzSPWGdeQOcRZXPwClbWbLKOe7QPmn";

var prevSearch = ["Rick & Morty", "Advice Animals"];
//javascript, jQuery
// var xhr = $.get("http://api.giphy.com/v1/gifs/search?q=ryan+gosling&api_key=4CdzSPWGdeQOcRZXPwClbWbLKOe7QPmn&limit=5");
// xhr.done(function(data) { console.log("success got data", data); });

function renderButtons() {
    $("#buttons-view").empty();

    for (var i=0; i < prevSearch.length; i++) {
        var a=$("<button>");
        a.addClass("")
        a.attr("data-name", prevSearch[i]);
        a.text(prevSearch[i]);

        $("#buttons-view").append(a);
    }
};

$("#find").on("click", function(event) {
  event.preventDefault();
  var query = $("#goSearch").val().trim();

  prevSearch.push(query);
  console.log(prevSearch);

  renderButtons();
  $("#goSearch").val("");
});

renderButtons();



// on click function to bring up results
// $('#find').click(function () {
//     var entry = $("#goSearch").val();
//     event.preventDefault();
//     getSearch(entry);
//     });

//     $(document).click(function () {
    // activate or play the gif when clicked
// });

    // function getWeather(city, country) {
    // var queryURL = "https://api.openweathermap.org/data/2.5/weather?q=" + city + "," + country + "&appid=" + APIKey;

    // Method 1 https://stackoverflow.com/questions/42193187/how-do-i-display-all-giphy-api-search-result-images/46804284
    function getSearch(entry) {
        $.ajax({
        url: xhr,
        method: "GET",
        }).then(function (response) {

            for (var i = 0; i < response.data.length; i++) {
            var giphyURL = response.data[i].images.fixed_height.url;
            var newImg = $("<img>");
            newImg.attr("src", giphyURL);
            $("<#result>").append(newImg);
        }
        });
    };

    // Method 2 (following along with class o_0)
    // $.ajax({
    // url: xhr,
    // method: "GET",
    // }).then(function (response) {
    //     $('#query').empty();
    //     // Create CODE HERE to Log the queryURL
    //     console.log(queryURL);
    //     // Create CODE HERE to log the resulting object
    //     console.log(response);
    //     // Create CODE HERE to transfer content to HTML
    //     $("<result>").html(response.embed_url);
    // });



// -----------------------------------------------------

//trending

// filter


</script>

</body>